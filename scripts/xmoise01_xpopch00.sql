-- BEGIN TABLES

-- DROP TABLE service_request;
-- DROP TRIGGER reservation_sum;
-- DROP TABLE reservation;
-- DROP TABLE client;
-- DROP TABLE service;
-- DROP TABLE suite;
-- DROP TABLE suite_type_spec;
-- DROP TABLE suite_type;

CREATE TABLE client
(
    passport_number     VARCHAR(16)  NOT NULL PRIMARY KEY,
    first_name          VARCHAR(32)  NOT NULL,
    last_name           VARCHAR(32)  NOT NULL,
    birth_date          DATE         NOT NULL,
    permanent_residence VARCHAR(128) NOT NULL,
    temporary_residence VARCHAR(128) NOT NULL,
    phone_number        VARCHAR(16)  NOT NULL,
    email               VARCHAR(64)  NOT NULL,
    registration_date   TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT phone_number_check CHECK (REGEXP_LIKE(phone_number, '^\+?[0-9]+$')),
    CONSTRAINT email_check CHECK (REGEXP_LIKE(email, '^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$'))
);

CREATE TABLE suite_type
(
    id       INT GENERATED ALWAYS AS IDENTITY NOT NULL,
    name     VARCHAR(255)                     NOT NULL CHECK ( name <> '' ),
    capacity INT                              NOT NULL CHECK ( capacity > 0 ),
    price    FLOAT                            NOT NULL CHECK ( price > 0 ),
    CONSTRAINT suite_type_pk PRIMARY KEY (id),
    CONSTRAINT suite_type_unique UNIQUE (name)
);

CREATE TABLE suite_type_spec
(
    suite_type_id INT          NOT NULL,
    suite_variant VARCHAR(255) NOT NULL CHECK ( suite_variant in ('ROOM', 'APARTMENT') ),
    beds_count    INT          NOT NULL CHECK ( beds_count > 0 ),
    rooms_count   INT          NOT NULL CHECK ( rooms_count > 0 ),
    CONSTRAINT suite_type_spec_pk PRIMARY KEY (suite_type_id),
    CONSTRAINT suite_type_spec_fk FOREIGN KEY (suite_type_id) REFERENCES suite_type (id),
    CONSTRAINT suite_type_spec_unique UNIQUE (suite_variant, beds_count, rooms_count),
    CONSTRAINT suite_type_spec_check CHECK ( suite_variant = 'ROOM' AND beds_count >= 1 AND rooms_count = 1 OR
                                             suite_variant = 'APARTMENT' AND beds_count >= 1 AND rooms_count > 1 )
);

CREATE TABLE suite
(
    suite_number  INT NOT NULL PRIMARY KEY,
    suite_type_id INT,
    -- 0 - not available, 1 - available
    suite_status  SMALLINT DEFAULT 1,
    CONSTRAINT suite_type_id_fk FOREIGN KEY (suite_type_id) REFERENCES suite_type (id)
        ON DELETE SET NULL,
    CONSTRAINT suite_number_fk CHECK ( suite_number > 1000 AND suite_number < 9999 ),
    CONSTRAINT suite_status_ck CHECK ( suite_status IN (0, 1))
);

CREATE TABLE service
(
    id             INT GENERATED ALWAYS AS IDENTITY NOT NULL PRIMARY KEY,
    service_name   VARCHAR(255)                     NOT NULL,
    service_price  FLOAT                            NOT NULL,
    service_status SMALLINT                         NOT NULL,
    CONSTRAINT service_status_check CHECK (service_status IN (0, 1))
);

CREATE TABLE reservation
(
    id              INT GENERATED ALWAYS AS IDENTITY NOT NULL PRIMARY KEY,
    client_passport VARCHAR(16)                      NOT NULL,
    suite_number    INT                              NOT NULL,
    arrival         DATE                             NOT NULL,
    departure       DATE                             NOT NULL,
    guests_count    INT                              NOT NULL,
    payment_option  VARCHAR(4)                       NOT NULL,
    sum             FLOAT DEFAULT 0                  NOT NULL,
    CONSTRAINT fk_client FOREIGN KEY (client_passport) REFERENCES client (passport_number),
    CONSTRAINT fk_suite FOREIGN KEY (suite_number) REFERENCES suite (suite_number),
    CONSTRAINT fk_payment_check CHECK (payment_option IN ('CASH', 'CARD')),
    CONSTRAINT fk_arrival_check CHECK (arrival < departure)
);

-- Create a trigger that automatically calculates the sum of the reservation
-- (The trigger should automatically calculate the sum of the reservation
-- based on the price of the suite and the number of days of the reservation)
CREATE OR REPLACE TRIGGER reservation_sum
    BEFORE INSERT OR UPDATE
    ON reservation
    FOR EACH ROW
DECLARE
    price FLOAT;
BEGIN
    SELECT price
    INTO price
    FROM suite
             JOIN SUITE_TYPE ST on ST.ID = SUITE.SUITE_TYPE_ID
    WHERE suite_number = :NEW.suite_number;

    :NEW.sum := price * (TO_DATE(:NEW.departure, 'DD.MM.YYYY') - TO_DATE(:NEW.arrival, 'DD.MM.YYYY'));
END;

CREATE TABLE service_request
(
    id                   INT GENERATED ALWAYS AS IDENTITY NOT NULL PRIMARY KEY,
    service_request_date DATE                             NOT NULL,
    service_id           INT                              NOT NULL,
    reservation_id       INT                              NOT NULL,
    CONSTRAINT fk_service_id FOREIGN KEY (service_id) REFERENCES service (id),
    CONSTRAINT fk_reservation_id FOREIGN KEY (reservation_id) REFERENCES reservation (id)
);

-- END TABLES

-- BEGIN VIEWS

-- DROP VIEW suite_type_view;
-- DROP VIEW suite_view;
-- DROP VIEW reservation_client_view;
-- DROP VIEW reservation_suite_view;
-- DROP VIEW service_request_view;

CREATE OR REPLACE VIEW suite_type_view AS
SELECT suite_type_id AS id, STS.suite_variant, name, capacity, price, beds_count, rooms_count
FROM suite_type
         JOIN suite_type_spec STS on suite_type.ID = STS.SUITE_TYPE_ID;

CREATE VIEW suite_view AS
SELECT suite_number,
       SUBSTR(suite_number, 1, 1) AS floor,
       ST.CAPACITY,
       ST.NAME,
       ST.PRICE,
       STS.ROOMS_COUNT,
       STS.BEDS_COUNT,
       STS.SUITE_VARIANT
FROM suite
         JOIN SUITE_TYPE ST on ST.ID = SUITE.SUITE_TYPE_ID
         JOIN SUITE_TYPE_SPEC STS on ST.ID = STS.SUITE_TYPE_ID;

CREATE OR REPLACE VIEW reservation_client_view AS
SELECT id,
       client_passport,
       suite_number,
       arrival,
       departure,
       guests_count,
       payment_option,
       c.first_name,
       c.last_name,
       c.phone_number,
       c.email
FROM reservation
         JOIN client c ON client_passport = c.passport_number;

CREATE OR REPLACE VIEW reservation_suite_view AS
SELECT id,
       client_passport,
       r.suite_number,
       s.floor,
       arrival,
       departure,
       guests_count,
       payment_option,
       sum,
       s.price,
       s.capacity,
       s.rooms_count,
       s.beds_count,
       s.suite_variant
FROM reservation r
         JOIN SUITE_VIEW s ON r.suite_number = s.suite_number;

CREATE VIEW service_request_view AS
SELECT service_request.id,
       service_request.service_request_date,
       s.service_name,
       s.service_price
FROM service_request
         JOIN service s ON service_request.service_id = s.ID;

-- END VIEWS

-- BEGIN PROCEDURES

-- DROP PROCEDURE create_client;
-- DROP PROCEDURE insert_suite_type;

CREATE OR REPLACE PROCEDURE create_client(
    insert_passport_number IN VARCHAR,
    insert_first_name IN VARCHAR,
    insert_last_name IN VARCHAR,
    insert_birth_date IN DATE,
    insert_permanent_residence IN VARCHAR,
    insert_temporary_residence IN VARCHAR,
    insert_phone_number IN VARCHAR,
    insert_email IN VARCHAR
)
AS
BEGIN
    INSERT INTO client
    VALUES (insert_passport_number,
            insert_first_name,
            insert_last_name,
            insert_birth_date,
            insert_permanent_residence,
            insert_temporary_residence,
            insert_phone_number,
            insert_email,
            CURRENT_TIMESTAMP);
END;

CREATE OR REPLACE PROCEDURE insert_suite_type(
    suite_name IN VARCHAR,
    suite_capacity IN INT,
    suite_price IN FLOAT,
    suite_type IN VARCHAR,
    suite_beds_count IN INT,
    suite_rooms_count IN INT,
    suite_type_id OUT INT
)
    IS
BEGIN
    INSERT INTO suite_type (name, capacity, price)
    VALUES (suite_name, suite_capacity, suite_price)
    RETURNING id INTO suite_type_id;
    INSERT INTO suite_type_spec (suite_type_id, suite_variant, beds_count, rooms_count)
    VALUES (suite_type_id, suite_type, suite_beds_count, suite_rooms_count);
END;

-- END PROCEDURES

-- BEGIN INSERTS

INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('5266VF6SF54R5', 'Kirill', 'Shevchuk', TO_DATE('1998-03-01', 'YYYY-MM-DD'), 'CZK', 'KAZ', '+4204816525656',
        'sheva3456@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('44434564EF9', 'John', 'Doe', TO_DATE('2000-11-01', 'YYYY-MM-DD'), 'CZK', 'CZK', '+420123456789',
        'john-doe@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('598484895H4', 'David', 'Harmony', TO_DATE('1983-05-07', 'YYYY-MM-DD'), 'CZK', 'CZK', '+420468458448',
        'david01239@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('134R4G846895', 'Ines', 'West', TO_DATE('1998-12-11', 'YYYY-MM-DD'), 'CZK', 'UK', '+4206448545484',
        'westines@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('55Y548548YT8E', 'Keanu', 'Richar', TO_DATE('2000-06-21', 'YYYY-MM-DD'), 'DEU', 'DEU', '+5485464848489',
        'rich-ki@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('5965856526', 'Callan', 'Brown', TO_DATE('1970-07-25', 'YYYY-MM-DD'), 'CZK', 'ITA', '+42054845456958',
        'bclaw@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('48496526326', 'Shelby', 'Frazier', TO_DATE('1992-07-25', 'YYYY-MM-DD'), 'CZK', 'DEU', '+4205156151566',
        'shelsss@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('458498889ED9D9', 'Ivan', 'Petrov', TO_DATE('1986-04-07', 'YYYY-MM-DD'), 'CZK', 'UKR', '+420468458448',
        'petya_vanya@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('97EW9595EWQ', 'Tomas', 'Prochazka', TO_DATE('1983-04-14', 'YYYY-MM-DD'), 'CZK', 'CZK', '+4206448545484',
        'proch-tom123@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('7989WF9FW89', 'Anika', 'Roth', TO_DATE('1996-07-29', 'YYYY-MM-DD'), 'SVK', 'UK', '+5485464848489',
        'anitkaaa01@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('48979FW4W9', 'Tom', 'Cruise', TO_DATE('1992-11-29', 'YYYY-MM-DD'), 'USA', 'USA', '+549659859596',
        'crutom@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('9658ER9GRE9', 'Meredith', 'Beck', TO_DATE('1990-07-23', 'YYYY-MM-DD'), 'HUN', 'HUN', '+4596559859',
        'm_beckkk@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('5989G859R', 'Adrian', 'Ellion', TO_DATE('2003-10-23', 'YYYY-MM-DD'), 'CZK', 'FRA', '+420468458448',
        'petya_vanya@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('56W5F9WE589W', 'Libor', 'Sebak', TO_DATE('2002-12-18', 'YYYY-MM-DD'), 'SVK', 'SVK', '+4206448545484',
        'proch-tom123@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('569G59WR9E5G', 'Dilan', 'Samus', TO_DATE('1989-08-14', 'YYYY-MM-DD'), 'DEU', 'DEU', '+5485464848489',
        'anitkaaa01@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('2565G9ED59GV5D', 'Vojtech', 'Petrasek', TO_DATE('1993-01-29', 'YYYY-MM-DD'), 'CZK', 'CZK', '+549659859596',
        'crutom@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('44G59ER9GE5R', 'Georgie', 'Petty', TO_DATE('1990-07-08', 'YYYY-MM-DD'), 'ITA', 'ITA', '+4596559859',
        'm_beckkk@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('6985F9SR5F89W', 'Jaroslav', 'Vetsik', TO_DATE('1991-04-18', 'YYYY-MM-DD'), 'CZK', 'CZK', '+420565265669',
        'jarsik6543@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('98F89WSF9SW', 'Brooke', 'Collins', TO_DATE('1997-10-20', 'YYYY-MM-DD'), 'SVK', 'UK', '+42151255598',
        'b.collins@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('656B256D5V6', 'Friedrich', 'Kafka', TO_DATE('1981-04-27', 'YYYY-MM-DD'), 'CZK', 'CZK', '+4205595956526',
        'kafka.f@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('95V6526RF6R5', 'Valentino', 'Santo', TO_DATE('1991-10-13', 'YYYY-MM-DD'), 'FRA', 'FRA', '+32654565635',
        'val_sal@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('233F62556ESW95', 'Oleksandr', 'Turitsia', TO_DATE('2002-03-07', 'YYYY-MM-DD'), 'CZK', 'UKR', '+4209552656568',
        'tur8765@gmail.com', CURRENT_TIMESTAMP);
INSERT INTO CLIENT (PASSPORT_NUMBER, FIRST_NAME, LAST_NAME, BIRTH_DATE, PERMANENT_RESIDENCE, TEMPORARY_RESIDENCE,
                    PHONE_NUMBER, EMAIL, REGISTRATION_DATE)
VALUES ('49654GR4E54FES', 'Nikita', 'Moiseev', TO_DATE('2000-11-14', 'YYYY-MM-DD'), 'RUS', 'CZK', '+420565656522',
        'moiseeita14@gmail.com', CURRENT_TIMESTAMP);

INSERT INTO SERVICE (SERVICE_NAME, SERVICE_PRICE, SERVICE_STATUS)
VALUES ('Cleaning Room', 10, 1);
INSERT INTO SERVICE (SERVICE_NAME, SERVICE_PRICE, SERVICE_STATUS)
VALUES ('Breakfast in the room', 15, 1);
INSERT INTO SERVICE (SERVICE_NAME, SERVICE_PRICE, SERVICE_STATUS)
VALUES ('In-room bar update', 50, 1);
INSERT INTO SERVICE (SERVICE_NAME, SERVICE_PRICE, SERVICE_STATUS)
VALUES ('Wake-up call', 1, 1);
INSERT INTO SERVICE (SERVICE_NAME, SERVICE_PRICE, SERVICE_STATUS)
VALUES ('Flower order', 10, 1);
INSERT INTO SERVICE (SERVICE_NAME, SERVICE_PRICE, SERVICE_STATUS)
VALUES ('Rent a meeting room', 20, 1);
INSERT INTO SERVICE (SERVICE_NAME, SERVICE_PRICE, SERVICE_STATUS)
VALUES ('Calling a cab', 2, 1);
INSERT INTO SERVICE (SERVICE_NAME, SERVICE_PRICE, SERVICE_STATUS)
VALUES ('Car rent', 80, 1);

DECLARE
    out_suite_id INT;
BEGIN
    insert_suite_type('Single Room', 1, 100, 'ROOM', 1, 1, out_suite_id);
    insert_suite_type('Double Room', 2, 150, 'ROOM', 2, 1, out_suite_id);
    insert_suite_type('Family Room', 4, 350, 'ROOM', 4, 1, out_suite_id);
    insert_suite_type('Standard Apartment', 1, 200, 'APARTMENT', 1, 2, out_suite_id);
    insert_suite_type('Luxury Apartment', 2, 500, 'APARTMENT', 2, 3, out_suite_id);
END;

INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1001, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1002, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1003, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1004, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1005, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1006, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1007, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1008, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1009, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1010, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1011, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1012, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1013, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1014, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1015, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1016, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1017, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1018, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1019, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1020, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1021, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1022, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1023, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1024, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1025, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1026, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1027, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1028, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1029, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1030, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1031, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1032, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1033, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1034, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1035, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1036, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1037, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1038, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1039, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1040, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1041, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1042, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1043, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1044, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1045, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1046, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1047, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1048, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1049, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (1050, 1, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2001, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2002, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2003, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2004, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2005, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2006, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2007, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2008, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2009, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2010, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2011, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2012, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2013, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2014, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2015, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2016, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2017, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2018, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2019, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2020, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2021, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2022, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2023, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2024, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2025, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2026, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2027, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2028, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2029, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2030, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2031, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2032, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2033, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2034, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2035, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2036, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2037, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2038, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2039, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2040, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2041, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2042, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2043, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2044, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2045, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2046, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2047, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2048, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2049, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (2050, 2, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3001, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3002, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3003, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3004, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3005, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3006, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3007, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3008, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3009, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3010, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3011, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3012, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3013, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3014, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (3015, 3, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4001, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4002, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4003, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4004, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4005, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4006, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4007, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4008, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4009, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4010, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4011, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4012, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4013, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4014, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (4015, 4, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (5001, 5, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (5002, 5, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (5003, 5, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (5004, 5, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (5005, 5, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (5006, 5, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (5007, 5, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (5008, 5, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (5009, 5, 1);
INSERT INTO SUITE (SUITE_NUMBER, SUITE_TYPE_ID, SUITE_STATUS)
VALUES (5010, 5, 1);

INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('598484895H4', 1027, TO_DATE('2024-05-05', 'YYYY-MM-DD'), TO_DATE('2024-05-07', 'YYYY-MM-DD'), 1, 'CASH');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('44434564EF9', 1045, TO_DATE('2023-02-01', 'YYYY-MM-DD'), TO_DATE('2023-02-15', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('134R4G846895', 3004, TO_DATE('2023-05-01', 'YYYY-MM-DD'), TO_DATE('2023-05-31', 'YYYY-MM-DD'), 3, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('55Y548548YT8E', 2029, TO_DATE('2023-09-26', 'YYYY-MM-DD'), TO_DATE('2023-09-30', 'YYYY-MM-DD'), 2, 'CASH');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('5965856526', 2047, TO_DATE('2023-12-23', 'YYYY-MM-DD'), TO_DATE('2023-12-24', 'YYYY-MM-DD'), 2, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('48496526326', 1001, TO_DATE('2023-08-24', 'YYYY-MM-DD'), TO_DATE('2023-08-27', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('458498889ED9D9', 5004, TO_DATE('2024-02-21', 'YYYY-MM-DD'), TO_DATE('2024-02-23', 'YYYY-MM-DD'), 2, 'CASH');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('97EW9595EWQ', 1031, TO_DATE('2023-06-11', 'YYYY-MM-DD'), TO_DATE('2023-06-14', 'YYYY-MM-DD'), 1, 'CASH');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('7989WF9FW89', 3003, TO_DATE('2024-01-05', 'YYYY-MM-DD'), TO_DATE('2024-01-21', 'YYYY-MM-DD'), 3, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('48979FW4W9', 1011, TO_DATE('2024-02-12', 'YYYY-MM-DD'), TO_DATE('2024-02-15', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('9658ER9GRE9', 1008, TO_DATE('2023-07-10', 'YYYY-MM-DD'), TO_DATE('2023-07-24', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('5989G859R', 5003, TO_DATE('2024-04-03', 'YYYY-MM-DD'), TO_DATE('2024-04-04', 'YYYY-MM-DD'), 1, 'CASH');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('56W5F9WE589W', 1033, TO_DATE('2023-07-25', 'YYYY-MM-DD'), TO_DATE('2023-07-30', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('569G59WR9E5G', 4002, TO_DATE('2024-02-04', 'YYYY-MM-DD'), TO_DATE('2024-02-08', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('2565G9ED59GV5D', 2033, TO_DATE('2024-03-03', 'YYYY-MM-DD'), TO_DATE('2024-03-05', 'YYYY-MM-DD'), 1, 'CASH');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('6985F9SR5F89W', 2043, TO_DATE('2024-03-18', 'YYYY-MM-DD'), TO_DATE('2024-03-28', 'YYYY-MM-DD'), 2, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('98F89WSF9SW', 1048, TO_DATE('2024-01-12', 'YYYY-MM-DD'), TO_DATE('2024-01-16', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('656B256D5V6', 4004, TO_DATE('2024-02-04', 'YYYY-MM-DD'), TO_DATE('2024-02-08', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('95V6526RF6R5', 3008, TO_DATE('2023-09-29', 'YYYY-MM-DD'), TO_DATE('2023-10-05', 'YYYY-MM-DD'), 4, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('233F62556ESW95', 5009, TO_DATE('2023-10-02', 'YYYY-MM-DD'), TO_DATE('2023-10-04', 'YYYY-MM-DD'), 2, 'CASH');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('44G59ER9GE5R', 1025, TO_DATE('2024-05-25', 'YYYY-MM-DD'), TO_DATE('2024-05-27', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('5989G859R', 1002, TO_DATE('2023-12-01', 'YYYY-MM-DD'), TO_DATE('2023-12-09', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('458498889ED9D9', 1016, TO_DATE('2023-09-15', 'YYYY-MM-DD'), TO_DATE('2023-09-21', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('98F89WSF9SW', 4002, TO_DATE('2023-09-05', 'YYYY-MM-DD'), TO_DATE('2023-09-06', 'YYYY-MM-DD'), 1, 'CASH');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('48979FW4W9', 3014, TO_DATE('2023-07-03', 'YYYY-MM-DD'), TO_DATE('2023-07-06', 'YYYY-MM-DD'), 3, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('134R4G846895', 1014, TO_DATE('2024-04-07', 'YYYY-MM-DD'), TO_DATE('2024-04-17', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('233F62556ESW95', 2027, TO_DATE('2023-12-17', 'YYYY-MM-DD'), TO_DATE('2023-12-19', 'YYYY-MM-DD'), 2, 'CASH');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('44434564EF9', 5002, TO_DATE('2023-06-21', 'YYYY-MM-DD'), TO_DATE('2023-07-04', 'YYYY-MM-DD'), 2, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('9658ER9GRE9', 5003, TO_DATE('2023-08-28', 'YYYY-MM-DD'), TO_DATE('2023-09-12', 'YYYY-MM-DD'), 2, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('95V6526RF6R5', 1040, TO_DATE('2023-09-21', 'YYYY-MM-DD'), TO_DATE('2023-09-26', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('5266VF6SF54R5', 4001, TO_DATE('2023-09-17', 'YYYY-MM-DD'), TO_DATE('2023-09-22', 'YYYY-MM-DD'), 1, 'CARD');
INSERT INTO RESERVATION (CLIENT_PASSPORT, SUITE_NUMBER, ARRIVAL, DEPARTURE, GUESTS_COUNT, PAYMENT_OPTION)
VALUES ('49654GR4E54FES', 2046, TO_DATE('2023-09-25', 'YYYY-MM-DD'), TO_DATE('2023-09-26', 'YYYY-MM-DD'), 1, 'CASH');

INSERT INTO SERVICE_REQUEST (SERVICE_REQUEST_DATE, SERVICE_ID, RESERVATION_ID)
VALUES (TO_DATE('2024-04-08', 'YYYY-MM-DD'), 1, 1);
INSERT INTO SERVICE_REQUEST (SERVICE_REQUEST_DATE, SERVICE_ID, RESERVATION_ID)
VALUES (TO_DATE('2023-12-02', 'YYYY-MM-DD'), 2, 2);
INSERT INTO SERVICE_REQUEST (SERVICE_REQUEST_DATE, SERVICE_ID, RESERVATION_ID)
VALUES (TO_DATE('2023-12-23', 'YYYY-MM-DD'), 2, 3);
INSERT INTO SERVICE_REQUEST (SERVICE_REQUEST_DATE, SERVICE_ID, RESERVATION_ID)
VALUES (TO_DATE('2023-09-29', 'YYYY-MM-DD'), 3, 4);
INSERT INTO SERVICE_REQUEST (SERVICE_REQUEST_DATE, SERVICE_ID, RESERVATION_ID)
VALUES (TO_DATE('2023-12-23', 'YYYY-MM-DD'), 4, 5);
INSERT INTO SERVICE_REQUEST (SERVICE_REQUEST_DATE, SERVICE_ID, RESERVATION_ID)
VALUES (TO_DATE('2023-12-18', 'YYYY-MM-DD'), 4, 6);
INSERT INTO SERVICE_REQUEST (SERVICE_REQUEST_DATE, SERVICE_ID, RESERVATION_ID)
VALUES (TO_DATE('2023-06-22', 'YYYY-MM-DD'), 4, 7);
INSERT INTO SERVICE_REQUEST (SERVICE_REQUEST_DATE, SERVICE_ID, RESERVATION_ID)
VALUES (TO_DATE('2023-08-24', 'YYYY-MM-DD'), 5, 8);
INSERT INTO SERVICE_REQUEST (SERVICE_REQUEST_DATE, SERVICE_ID, RESERVATION_ID)
VALUES (TO_DATE('2024-03-18', 'YYYY-MM-DD'), 6, 9);
INSERT INTO SERVICE_REQUEST (SERVICE_REQUEST_DATE, SERVICE_ID, RESERVATION_ID)
VALUES (TO_DATE('2024-03-04', 'YYYY-MM-DD'), 6, 10);

-- END INSERTS

----------------- THE FOURTH PART OF THE PROJECT --------------------

-- DROP TRIGGER reservation_check_available;
-- DROP TRIGGER reservation_check_guests;
-- DROP TRIGGER request_check_dates;

-- Check if the suite is available for the specified dates
-- (The trigger should not allow you to insert or update a reservation
-- if the suite is already reserved for the specified dates)
CREATE OR REPLACE TRIGGER reservation_check_available
    BEFORE INSERT OR UPDATE
    ON reservation
    FOR EACH ROW
DECLARE
    counter INT;
BEGIN
    SELECT COUNT(*)
    INTO counter
    FROM reservation
    WHERE suite_number = :NEW.suite_number
      AND (
            (:NEW.arrival BETWEEN arrival AND departure)
            OR (:NEW.departure BETWEEN arrival AND departure)
        );
    IF counter > 0 THEN
        RAISE_APPLICATION_ERROR(-20001, 'This suite is already reserved for the specified dates.');
    END IF;
END;

-- Check if the number of guests does not exceed the capacity of the suite
-- (The trigger should not allow you to insert or update a reservation
-- if the number of guests exceeds the capacity of the suite)
CREATE OR REPLACE TRIGGER reservation_check_guests
    BEFORE INSERT OR UPDATE
    ON reservation
    FOR EACH ROW
DECLARE
    counter INT;
BEGIN
    SELECT COUNT(*)
    INTO counter
    FROM suite s
             JOIN suite_type st ON s.suite_type_id = st.id
    WHERE :NEW.suite_number = s.suite_number
      AND :NEW.guests_count > st.capacity;
    IF counter > 0 THEN
        RAISE_APPLICATION_ERROR(-20004, 'Invalid number of guests for this room.');
    END IF;
END;

-- Check if the date of the service request is on the dates of the reservation
-- (The trigger should not allow you to insert or update a service request
-- if the date of the service request is not on the dates of the reservation)
CREATE OR REPLACE TRIGGER request_check_dates
    BEFORE INSERT OR UPDATE
    ON service_request
    FOR EACH ROW
DECLARE
    counter INT;
BEGIN
    SELECT COUNT(*)
    INTO counter
    FROM reservation r
    WHERE r.id = :NEW.reservation_id
      AND (:NEW.service_request_date < r.arrival OR :NEW.service_request_date > r.departure);
    IF counter > 0 THEN
        RAISE_APPLICATION_ERROR(-20003, 'The date of the service request must be on the dates of the reservation.');
    END IF;
END;

-- TESTING TRIGGERS
-- reservation_sum trigger
DECLARE
    sel_suite_number    INT;
    sel_client_passport VARCHAR(16);
    reservation_sum     FLOAT;
    suite_type_price    FLOAT;
    reservation_check_available_err EXCEPTION;
    reservation_check_guests_err EXCEPTION;
    request_check_dates_err EXCEPTION;
    PRAGMA EXCEPTION_INIT (reservation_check_available_err, -20001);
    PRAGMA EXCEPTION_INIT (reservation_check_guests_err, -20004);
    PRAGMA EXCEPTION_INIT (request_check_dates_err, -20003);
BEGIN
    SELECT passport_number INTO sel_client_passport FROM client WHERE rownum = 1;

    IF sel_client_passport IS NULL THEN
        INSERT INTO CLIENT
        VALUES ('987654321',
                'Jane',
                'Doe',
                TO_DATE('01.01.2001', 'DD.MM.YYYY'),
                'Permanent residence',
                'Temporary residence',
                '+420987654321',
                'jane-doe@gmail.com',
                CURRENT_TIMESTAMP);

        SELECT passport_number INTO sel_client_passport FROM client WHERE rownum = 1;
    END IF;

    SELECT suite_number INTO sel_suite_number FROM suite WHERE rownum = 1;

    IF sel_suite_number IS NULL THEN
        FOR suite_type IN (SELECT * FROM SUITE_TYPE)
            LOOP
                INSERT INTO SUITE
                VALUES (suite_type.ID * 1000 + 1, suite_type.ID, 1);
            END LOOP;

        SELECT suite_number INTO sel_suite_number FROM suite WHERE rownum = 1;
    END IF;

    INSERT INTO RESERVATION(client_passport, suite_number, arrival, departure, guests_count, payment_option)
    VALUES (sel_client_passport, sel_suite_number, TO_DATE('01.12.2025', 'DD.MM.YYYY'),
            TO_DATE('14.12.2025', 'DD.MM.YYYY'), 1, 'CASH');

    -- Sum trigger works
    SELECT SUM
    INTO reservation_sum
    FROM reservation
    WHERE client_passport = sel_client_passport
      AND suite_number = sel_suite_number
      AND arrival = TO_DATE('01.12.2025', 'DD.MM.YYYY')
      AND departure = TO_DATE('14.12.2025', 'DD.MM.YYYY');

    SELECT ST.price
    INTO suite_type_price
    FROM SUITE
             INNER JOIN SUITE_TYPE ST on ST.ID = SUITE.SUITE_TYPE_ID
    WHERE SUITE.suite_number = sel_suite_number;

    DBMS_OUTPUT.PUT_LINE('Sum trigger works: ' || reservation_sum || 'CZK (' || suite_type_price || 'CZK * 13 days)');
    DBMS_OUTPUT.PUT_LINE('');
END;

-- reservation_check_available trigger
DECLARE
    sel_suite_number    INT;
    sel_client_passport VARCHAR(16);
    reservation_check_available_err EXCEPTION;
    reservation_check_guests_err EXCEPTION;
    request_check_dates_err EXCEPTION;
    PRAGMA EXCEPTION_INIT (reservation_check_available_err, -20001);
    PRAGMA EXCEPTION_INIT (reservation_check_guests_err, -20004);
    PRAGMA EXCEPTION_INIT (request_check_dates_err, -20003);
BEGIN
    SELECT passport_number INTO sel_client_passport FROM client WHERE rownum = 1;
    SELECT suite_number INTO sel_suite_number FROM suite WHERE rownum = 1;


    INSERT INTO RESERVATION (client_passport, suite_number, arrival, departure, guests_count, payment_option)
    VALUES (sel_client_passport, sel_suite_number, TO_DATE('01.12.2025', 'DD.MM.YYYY'),
            TO_DATE('14.12.2025', 'DD.MM.YYYY'), 1, 'CASH');
EXCEPTION
    WHEN reservation_check_available_err THEN
        DBMS_OUTPUT.PUT_LINE('reservation_check_available trigger works: ' || SQLERRM);
        DBMS_OUTPUT.PUT_LINE('');
END;

-- reservation_check_guests trigger
DECLARE
    sel_suite_number    INT;
    sel_client_passport VARCHAR(16);
    reservation_check_available_err EXCEPTION;
    reservation_check_guests_err EXCEPTION;
    request_check_dates_err EXCEPTION;
    PRAGMA EXCEPTION_INIT (reservation_check_available_err, -20001);
    PRAGMA EXCEPTION_INIT (reservation_check_guests_err, -20004);
    PRAGMA EXCEPTION_INIT (request_check_dates_err, -20003);
BEGIN
    SELECT passport_number INTO sel_client_passport FROM client WHERE rownum = 1;
    SELECT suite_number INTO sel_suite_number FROM suite WHERE rownum = 1;


    INSERT INTO RESERVATION (client_passport, suite_number, arrival, departure, guests_count, payment_option)
    VALUES (sel_client_passport, sel_suite_number, TO_DATE('01.12.2026', 'DD.MM.YYYY'),
            TO_DATE('14.12.2026', 'DD.MM.YYYY'), 100, 'CASH');
EXCEPTION
    WHEN reservation_check_guests_err THEN
        DBMS_OUTPUT.PUT_LINE('reservation_check_guests trigger works: ' || SQLERRM);
        DBMS_OUTPUT.PUT_LINE('');
END;

-- request_check_dates trigger
DECLARE
    sel_suite_number    INT;
    sel_client_passport VARCHAR(16);
    sel_service_id      INT;
    sel_reservation_id  INT;
    reservation_check_available_err EXCEPTION;
    reservation_check_guests_err EXCEPTION;
    request_check_dates_err EXCEPTION;
    PRAGMA EXCEPTION_INIT (reservation_check_available_err, -20001);
    PRAGMA EXCEPTION_INIT (reservation_check_guests_err, -20004);
    PRAGMA EXCEPTION_INIT (request_check_dates_err, -20003);
BEGIN
    SELECT passport_number INTO sel_client_passport FROM client WHERE rownum = 1;
    SELECT suite_number INTO sel_suite_number FROM suite WHERE rownum = 1;
    SELECT ID INTO sel_service_id FROM SERVICE WHERE rownum = 1;

    IF sel_service_id IS NULL THEN
        INSERT INTO SERVICE(service_name, service_price, service_status)
        VALUES ('Test service', 100, 1);

        SELECT ID INTO sel_service_id FROM SERVICE WHERE rownum = 1;
    END IF;

    SELECT ID
    INTO sel_reservation_id
    FROM reservation
    WHERE client_passport = sel_client_passport
      AND suite_number = sel_suite_number
      AND arrival = TO_DATE('01.12.2025', 'DD.MM.YYYY')
      AND departure = TO_DATE('14.12.2025', 'DD.MM.YYYY');

    INSERT INTO service_request(service_request_date, service_id, reservation_id)
    VALUES (TO_DATE('01.01.2025', 'DD.MM.YYYY'), sel_service_id, sel_reservation_id);
EXCEPTION
    WHEN request_check_dates_err THEN
        DBMS_OUTPUT.PUT_LINE('request_check_dates trigger works: ' || SQLERRM);
        DBMS_OUTPUT.PUT_LINE('');
END;

EXPLAIN PLAN FOR
SELECT s.suite_number, st.capacity, COUNT(r.client_passport) AS reservation_quantity
FROM reservation r
         JOIN suite s on r.suite_number = s.suite_number
         JOIN suite_type st on s.suite_type_id = st.id
GROUP BY s.suite_number, st.capacity;

-- Speed up the previous request by creating indexes
CREATE INDEX suite_number ON reservation (suite_number);
CREATE INDEX suite_type_id ON suite (suite_type_id);

SELECT *
FROM TABLE (DBMS_XPLAN.DISPLAY);

EXPLAIN PLAN FOR
SELECT s.suite_number, st.capacity, COUNT(r.client_passport) AS reservation_quantity
FROM reservation r
         JOIN suite s on r.suite_number = s.suite_number
         JOIN suite_type st on s.suite_type_id = st.id
GROUP BY s.suite_number, st.capacity;

SELECT *
FROM TABLE (DBMS_XPLAN.DISPLAY);

-- Grant access rights to the XPOPCH00 user
GRANT ALL ON reservation TO XPOPCH00;
GRANT ALL ON client TO XPOPCH00;
GRANT ALL ON service TO XPOPCH00;
GRANT ALL ON service_request TO XPOPCH00;
GRANT ALL ON suite TO XPOPCH00;
GRANT ALL ON suite_type TO XPOPCH00;
GRANT ALL ON suite_type_spec TO XPOPCH00;

GRANT SELECT ON reservation_suite_view TO XPOPCH00;

-- Select request to display the status of clients' arrivals
SELECT c.first_name || ' ' || c.last_name ||
       CASE
           WHEN r.arrival < CURRENT_DATE THEN 'already arrived in the past'
           WHEN r.arrival > CURRENT_DATE AND r.departure < CURRENT_DATE THEN ' is currently in the hotel'
           ELSE ' will arrive in the future'
           END AS status
FROM reservation r
         JOIN client c ON r.client_passport = c.passport_number;

